<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fresh Air</title>
    {% block css %}
    <link rel="stylesheet" href="../css/perfil.css">
    {% endblock %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    {% block header %}
    <header class="header">

        <div class="logo">
            <img src="../Imgs/montaña.png" alt="Logo de la pagina">
            <h1>Fresh Air</h1>
            
        </div>

        <input type="checkbox" id="toggle">
        <label for="toggle" > <img class="menu" src="../Imgs/menu.svg" alt="menu"></label>

        <nav class="navigation" >
            <ul>
                <li><a href="../portada.php">Inicio</a></li>

                <li><a href="#">Actividades</a>
                    <ul>
                        <li><a href="../actividad.php?ac=3">Senderismo</a></li>
                        <li><a href="../actividad.php?ac=1">Tirolina</a></li>
                        <li><a href="../actividad.php?ac=2">Escalada</a></li>
                        <li><a href="../actividad.php?ac=7">Barranquismo</a></li>
                        <li><a href="../actividad.php?ac=5">Mini-Hollywood</a></li>
                        <li><a href="../actividad.php?ac=4">Paseo en camello</a></li>
                        <li><a href="../actividad.php?ac=6">Montar a caballo</a></li>
                        <li><a href="../actividad.php?ac=8">Acampada</a></li>
                        <li><a href="../actividad.php?ac=9">Jardin Botanico</a></li>
                    </ul>
                </li>


                <li><a href="https://www.ugr.es/estudiantes/grados/grado-ingenieria-informatica/sistemas-informacion-basados-webeingsoft">Sobre Nosotros</a></li>
                
               
                
                {% if not registrado %}
                    <li><a href="../iniciar_sesion.php">Iniciar Sesion</a></li>

                {% else %}
                    <li><a href="../cerrar_sesion.php">Cerrar Sesion</a></li>
                    <li><a href="../perfil.php"><img src="../Imgs/perfil.png" alt="Perfil" class="perfil"></a></li>

                   <h2> Bienvenido {{ usuario }}</p>
                {% endif %}

            </ul>
        </nav>

    </header>
    {% endblock %}

    <main>
        <div class="info">
            <div class="input-group flex-nowrap" bis_skin_checked="1">
                <span class="input-group-text" id="addon-wrapping">@</span>
                <label type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="addon-wrapping">
                    {{ correo }}
                </label>
            </div>                
                  
            <div class="input-group flex-nowrap" bis_skin_checked="1">
                <span class="input-group-text" id="addon-wrapping">-></span>
                <label type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="addon-wrapping">
                    {{ usuario }}  
                </label>
            </div>   
            
            <div id="cambios">
                <!--Cambiar nombre usuario-->
                <form action="cambiar_perfil.php" method="post" style="padding: 2px;">
                    <input type="hidden" name="nombre-usuario" value="{{ usuario }}">
                    <label >Nombre nuevo:</label>
                    <input type="text" name="nombre-nuevo" id="input"/>
                    <button type="submit" name="accion" value="cambiar-nombre" class="btn btn-primary">
                        Cambiar Nombre
                    </button>
                </form>
                <!--Cambiar correo usuario-->
                <form action="cambiar_perfil.php" method="post" style="padding: 2px;">
                    <input type="hidden" name="correo-usuario" value="{{ correo }}">
                    <label >Correo nuevo:</label>
                    <input type="email" name="correo-nuevo" id="input" required/>
                    <button type="submit" name="accion" value="cambiar-correo" class="btn btn-primary">
                        Cambiar Correo
                    </button>
                </form>
                <!--Cambiar contraseña-->
                <form action="cambiar_perfil.php" method="post" style="padding: 2px;">
                    <input type="hidden" name="nombre-usuario" value="{{ usuario }}">
                    <label >Contraseña nueva:</label>
                    <input type="text" name="contraseña-nueva" id="input"/>
                    <button type="submit" name="accion" value="cambiar-contraseña" class="btn btn-primary">
                        Cambiar Contraseña
                    </button>
                </form>
            </div>
        </div>
        
        <!--Gestion de permisos de usuarios-->
       
        {% if root %}
            <h2 class="mostrar-gestion-permisos">Gestionar permisos</h2>

                {% for user in users %}
                    <div class="usuario" id="usuario">
                        
                        <label>{{ user.nombre }} / </label>
                        <label>{{ user.correo }}</label>
                        <!--Eliminar usuario-->
                        <form action="../gestion_permisos.php" method="post">
                            <input type="hidden" name="nombre-usuario" value="{{ user.nombre }}">
                            <input type="hidden" name="correo-usuario" value="{{ user.correo }}">
                            <button type="submit" name="accion" value="eliminar-usuario" class="eliminar-boton">
                                <img src="../Imgs/eliminar.png" alt="Eliminar usuario">
                            </button>
                        </form>

                        <!--Dar permiso moderador -->
                        <!--Quitar permiso moderador-->
                        <form action="../gestion_permisos.php" method="post" id="permisos-moderador">
                            <input type="hidden" name="nombre-usuario" value="{{ user.nombre }}">
                            <input type="hidden" name="correo-usuario" value="{{ user.correo }}">
                            <button type="submit" name="accion" value="dar-moderador" class="dar-moderador-boton">
                                <img src="../Imgs/poner.png" alt="Dar permiso moderador">
                            </button>
                            <label>Permiso moderador</label>
                            <button type="submit" name="accion" value="quitar-moderador" class="quitar-moderador-boton">
                                <img src="../Imgs/quitar.png" alt="Quitar permiso moderador">
                            </button>

                        </form>

                        <!--Dar permiso gestor-->
                        <!--Quitar permiso gestor-->
                        <form action="../gestion_permisos.php" method="post" id="permisos-gestor">
                            <input type="hidden" name="nombre-usuario" value="{{ user.nombre }}">
                            <input type="hidden" name="correo-usuario" value="{{ user.correo }}">
                            <button type="submit" name="accion" value="dar-gestor" class="dar-gestor-boton">
                                <img src="../Imgs/poner.png" alt="Dar permiso gestor">
                            </button>
                            <label>Permiso gestor</label>
                            <button type="submit" name="accion" value="quitar-gestor" class="quitar-gestor-boton">
                                <img src="../Imgs/quitar.png" alt="Quitar permiso gestor">
                            </button>
                        </form>

                        <!--Dar permiso root-->
                        <!--Quitar permiso root-->
                        <form action="../gestion_permisos.php" method="post" id="permisos-root">
                            <input type="hidden" name="nombre-usuario" value="{{ user.nombre }}">
                            <input type="hidden" name="correo-usuario" value="{{ user.correo }}">
                            <button type="submit" name="accion" value="dar-root" class="dar-root-boton">
                                <img src="../Imgs/poner.png" alt="Dar permiso root">
                            </button>
                            <label>Permiso root</label>
                            <button type="submit" name="accion" value="quitar-root" class="quitar-root-boton">
                                <img src="../Imgs/quitar.png" alt="Quitar permiso root">
                            </button>
                        </form>



                    </div>
                {% endfor %}
        {% endif %}
        </div>
        
    </main>
    

    <footer>
        <p>© 2024 Fresh Air</p>
    </footer>
      

</body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="../js/coments.js"></script>
</html>


